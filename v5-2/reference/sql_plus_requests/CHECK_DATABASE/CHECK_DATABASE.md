---
layout: default
title: CHECK_DATABASE
nav_order: 5
parent: Запросы SQL+
grand_parent: Справочная информация
has_children: false
has_toc: false
---

# CHECK_DATABASE
{: .no_toc }

<details markdown="block">
  <summary>
    Содержание раздела
  </summary>
  {: .text-delta }
1. TOC
{:toc}
</details>

Запрос позволяет проверить соответствие [логических таблиц](../../../overview/main_concepts/logical_table/logical_table.md) 
[логической базы данных](../../../overview/main_concepts/logical_db/logical_db.md) 
и их физических представлений — [физических таблиц](../../../overview/main_concepts/physical_table/physical_table.md) 
в [хранилище данных](../../../overview/main_concepts/data_storage/data_storage.md).

В проверке участвуют логические таблицы логической базы данных и все связанные с ними физические таблицы. 
Если СУБД хранилища не хранит данные логической таблицы, и, следовательно, не содержит связанные 
физические таблицы, она пропускается при проверке логической таблицы.

Проверяется соответствие следующих элементов:
*   имен и порядка следования столбцов,
*   типов данных столбцов,
*   первичного ключа.

Имена и порядок следования проверяются для всех столбцов логических и физических таблиц, включая 
служебные столбцы, имеющиеся только у физических таблиц. Например, если служебный столбец `sys_to` 
удален из физической таблицы, в ответе вернется сообщение о расхождении.

В ответе возвращается:
*   объект ResultSet с одной записью, содержащей результаты проверки, при успешном выполнении запроса;
*   исключение при неуспешном выполнении запроса.

Возвращаемая информация включает сообщение об успешной проверке или найденных расхождениях, а также 
список проверенных СУБД хранилища. Примеры запросов и ответов см. в секции [Примеры](#examples).

## Синтаксис {#syntax}

Проверка логической базы данных, [выбранной по умолчанию](../../../working_with_system/other_features/default_db_set-up/default_db_set-up.md):
```sql
CHECK_DATABASE()
```

Проверка указанной логической базы данных:
```sql
CHECK_DATABASE(db_name)
```

Параметры:
*   `db_name` — имя логической базы данных, для таблиц которой выполняется проверка.

## Примеры {#examples}

Проверка логической базы данных `sales`:
```sql
CHECK_DATABASE(sales)
```

На рисунках ниже показаны примеры ответов: на первом — ответ при отсутствии расхождений, на втором —
при наличии расхождений. Расхождения вызваны тем, что в целях иллюстрации между первым и вторым запросом
столбец `description` одной из таблиц был переименован в ADB.

![](check_database_without_inconsistency.png){:height="50%" width="50%"}
{: .figure-center}
*Ответ CHECK_DATABASE при успешной проверке*
{: .figure-caption-center}

![](check_database_with_inconsistency.png)
{: .figure-center}
*Ответ CHECK_DATABASE с найденными расхождениями*
{: .figure-caption-center}